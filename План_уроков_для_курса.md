# План уроков для курса


## Содержание
- [Знакомство с роботом](#знакомство-с-роботом)
- [Управление движением робота](#управление-движением-робота)
- [О мозге робота](#о-мозге-робота)
- [Управление светодиодами](#управление-светодиодами)
- [Управление моторами](#управление-моторами)
- [Энкодеры](#энкодеры)
- [Регуляторы](#регуляторы)
- [Новая логика движения](#новая-логика-движения)
- [Датчик линии и цвета](#датчик-линии-и-цвета)
- [Светодиодная матрица](#светодиодная-матрица)
- [Умный город](#умный-город)

### Знакомство с роботом
Знакомство с платформой. Как управлять роботом.
0. "Рисование" - О платформе, список всей периферии, с чем будем работать, какие ограничения на библиотеки и на тэговые слова.
1. "Тест драйв" - Немного вводных слов и движение робота вперед с помощью библиотеки
2. "Водительские права" - самостоятельное написание простой программы, аналогичной предыдущему уроку
	

### Управление движением робота
Демонстрация возможностей робота

1. "Заезд на короткую дистанцию" - Функции библиотеки для движения на определенную дистанцию. Движение вперед и назад. 
2. "Маневрирование" - поворот на месте направо и налево. Задание: прочитать данные из файла и записать в другой.
3. "fruit ninja" - Написать программу с последовательностью команд для движения по траектории изображенной на схеме.
	

### Управление светодиодами
Базовые функции работы с gpio на примере светодиодов
1. "Дальний свет" -  принцип работы светодиода. Задание: включение светодиодов. 
2. "Сигнализация" - Подробнее о функциях digitalWrite(), pinMode(). Здание: моргания светодиодами. 


### Управление моторами
Что такое ДПТ, как им управлять через драйвер, понятие ШИМ.
1. "Электродвигатель" - базовые принципы работы ДПТ. Задание: привести робота в движение посредством подачи сигнала на драйвер.
2. "Движение робота" - ШИМ и analogWrite(), информация про драйвер, немного о кинематике робота, . Задание: реализация поворота с помощью подачи сигнала на драйвер.
	

### Энкодеры
Что такое энкодер, решение задачи поворота на заданный угол. Изучение кинематики робота.
1. "Энкодер" - что такое энкодер, как можно использовать. Задание: в заготовленный код для считывания данных с энкодеров добавить условие, чтобы робот останавливался, когда получит данные соответствующие определенному среднему значению.  
2. "Одометр" - что такое устройство одометр, детальное описание реализации и функции. Задание: написать одометр, который будет переводить данные с энкодеров в сантиметры и робот будет останавливаться при прохождении определенного расстояния.
2. "Работа с файловой системой" - запись, чтение файлов на esp32. Задание: прочитать из файла текст, затем записать текст из этого файла в другой файл
3. "Спидометр" - что такое спидометр, как его можно реализовать имея данные о расстоянии. (Можно привести расчеты исходя из производных по определению). Задание реализовать спидометр, который замерит среднюю скорость движения робота.
4. "Регулировка руля" - ещё информация о кинематике робота, решение задачи отслеживания угла поворота робота. Задание: написать код для поворота робота на 90 градусов.

### Регуляторы
 **с проверками пока сложно**
 Простая версия теории автоматического управления на примере нескольких простых регуляторов.
1. "Релейный регулятор" - что такое регуляторы, для чего они нужны(open-loop and closed-loop системы), что такое релейный регулятор, как работает, где применяется. Задание реализация релейного регулятора для разворота робота 
2. "П-регулятор" - что такое П-регулятор... почему он лучше чем релейный. Задание реализация разворота с П-регулятором.
3. "ПИ-регулятор" - недостатки П-регулятора. Устранение установившейся ошибки с помощью интегральной составляющей. Задание реализация разворота с ПД-регулятором.
4. "ПИД-регулятор" - что такое дифференциальная составляющая, и как она помогает устранить перерегулирование. Задание реализация разворота с ПД-регулятором.
5. "Методы настройки ПИД-регулятора" - метод Циглера-Николса для подбора коэффициентов. Возможно без задания.


### Новая логика движения
**с проверками пока сложно, но есть идеи**
Пишем собственную библиотеку для робота, пишем функции движения, учимся делить код на блоки, применяем регуляторы для улучшения движения, оптимизируем движение
1. "Библиотека движения" - зачем нам библиотека. функции для считывания данных с энкодеров. 
2. "Движение по прямой" - Улучшаем движение прямо с использованием регулятора. Задание применить регулятор для улучшения движения прямолинейно.
3. "Автоматическая коробка передач" - улучшение функций движения с регулятором по скорости
4. "Функции поворота" - поворот робота на определенный угол, угол передается в качестве аргумента


### Датчик линии и цвета
Работа с датчиком линии, решение задачи слежения за линией. Работа с датчиком цвета. Алгоритмы для сложного движения робота. Простой фильтр помех с датчиков линии.
В случае простой трассы
1. "Датчик линии" - что такое датчик линии и как он работает. Как считывать данные, добавляем функцию считывания данных с датчика в библиотеку. Задание: робот должен проехать 50 см и по пути записывать данные с датчиков, потом это будет сравниваться с тем, что должно получиться в процентном соотношении
2. "Выезд на трассу" - Немного о калибровке(без функций калибровки просто для общего ознакомления).(Возможно о работе с библиотекой для чтения данных с датчиков) Идея алгоритма для выезда на трассу. Задание: написать алгоритм автоматического выезда на трассу, то есть если на пути встречается трасса, то робот встает на трассу
3. "Движение по линии" - алгоритм движения по линии. Задание реализовать движение по линии по простому алгоритму.
4. "Фильтр помех" - фильтр скользящего среднего для усреднения данных полученных с датчиков.
5. "Регулятор слежения" - Регуляторы для движения по линии. П, ПД или ПИД. Задание: проехать круг за определенное время.
6. "Цветной мир" - что такое датчик цвета и как он работает. как считывать данные с датчика. Задача: проехать n сантиметров и записывать данные с датчика

Задания для более сложной трассы можно:
1. "Дорога ночью" - Алгоритм для движения по трассе, если на ней есть участок с инвертированным цветом.
3. "Лежачие полицейские" - дорога прерывается и начинаются несколько поперечных линий, задача преодолеть этот участок. Пример алгоритма, если были активированы все датчики, необходимо замедлиться и ехать прямо, пока не найдется продолжение обычной трассы.
4. "Ремонт дороги" - на трассе отсутствует кусок черного полотна, робот должен продолжить движение по трассе и найти продолжение дороги. Пример алгоритма: Размашистые движения по карте
5. "Грунтовая дорога" - на трассе желтый кусок полотна, который нужно проехать с замедленной скоростью


### Светодиодная матрица
Работа со светодиодной матрицей, сдвиговыми регистрами
1. "Логотип команды" - что такое светодиодная матрица? Как работают сдвиговые регистры. Подключение библиотеки для управления светодиодной матрицей. Задание - вывести несколько определенных пикселей поочередно.
**Просто задания**
2. "НА СТАРТ, ВНИМАНИЕ, ПУСК" - вывод на матрицу обратного отсчета до старта робота // "Анимация" - анимация включения робота. Например с анимацией загорается "символ питание"
3. "Бегущая строка" - вывод текста в виде бегущей строки с помощью библиотеки, также дать коды символов, чтобы ученик мог вывести своё сообщение, например, имя...
	

### Умный город
Требует отдельного поля, датчики линии, датчик цвета. Уровень сложности высокий. В большей степени в этих уроках можно погрузиться в сложные алгоритмы и графы.

1. "Перекресток" - определение перекрестка, как принять решение при движение на перекрестке и выехать на необходимую дорогу.
2. "Автопарковка" - написание функции парковки на улице, то есть робот едет по улице, пока не найдет парковочное место(цветную метку)
3. "дорога до дома" - Алгоритм выбора: робот находится в неизвестном месте, но известно что угол между вектором направления робота и вектором направления на точку не более 90 градусов -> на каждом перекрестке смотрим по какой координате больше разница, в ту сторону и поворачиваем. задача доехать до точки по линиям, выбирая правильное направление движения на перекрестке. 
4. "Круговое движение" - инструкции для робота при движении по кругу. **Есть вопросы в реализации, нуждается в тестировании**
5. "Заправки" - Добавление внутреннего счетчика топлива, чтобы вести учет топлива, если робот проехал уже много, то нужно остановиться на заправке ("красной метке"), проезжая мимо неё.
6. "Навигатор" - **можно расширять**
	1. "Восстанавливаем данные" - в наличии длины всех улиц, кроме одной. Необходимо измерить улицу с помощью робота и восстановить утерянные данные
	2. *"Построение графа"* - понятие графа. примеры разных графов, примеры реализации разных графов. создание графа из улиц и их длин. **Лучше просто иметь этот список.**
	3. *"Построение оптимального пути"* - алгоритм Дейкстры для поиска оптимального пути. **Интересно, но может быть сложно**
	4. "Едем по навигатору" - генерация команд для робота для движения по полученному с навигатора маршруту. Задание проехать по маршруту из текущего известного положение на указанную улицу.
7. "Пешеходные зоны" - участки другого цвета, на которых необходимо снижать скорость
8. "Такси" - нужно доехать до места и забрать пассажира, потом довести его до точки, при этом необходимо исполнять все пункты вышеописанных правил, то есть останавливаться на заправках и снижать скорость на пешеходных зонах